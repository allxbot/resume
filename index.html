<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xu Yongzhi - Resume</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <style type="text/tailwindcss">
        @layer utilities {
            .card-hover { transition: all 0.3s ease; }
            .card-hover:hover { transform: translateY(-5px); box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1); }
            .progress-bar { height: 8px; background: linear-gradient(90deg, #165DFF var(--progress), #E5E6EB var(--progress)); border-radius: 4px; }
        }
        @media print {
            @page { size: A4; margin: 1cm; }
            body { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
            header, .no-print { display: none !important; }
            section { break-inside: avoid; padding: 10px 0 !important; }
            .card-hover { box-shadow: none !important; transform: none !important; border: 1px solid #eee; }
        }
    </style>
    <script>
        tailwind.config = { theme: { extend: { colors: { primary: '#165DFF', secondary: '#36CFC9' }, fontFamily: { inter: ['Inter', 'sans-serif'] } } } }
    </script>
</head>
<body class="font-inter bg-gray-100 text-gray-700">
    <header class="fixed w-full bg-white/90 backdrop-blur-sm shadow-sm z-50 print:hidden">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <span class="text-xl font-bold text-primary" id="nav-name">Xu Yongzhi</span>
            <div class="flex items-center gap-4">
                <button id="langSwitch" class="border px-3 py-1 rounded-full text-sm font-medium hover:text-primary">EN</button>
                <button onclick="window.print()" class="text-gray-500 hover:text-primary"><i class="fa fa-print"></i></button>
            </div>
        </div>
    </header>

    <section class="pt-32 pb-20 bg-gradient-to-br from-primary/5 to-secondary/5 print:pt-10">
        <div class="container mx-auto px-4 flex flex-col md:flex-row items-center">
            <div class="md:w-1/2 mb-10 md:mb-0">
                <h1 class="text-4xl md:text-5xl font-bold text-gray-700 mb-4" id="hero-name"></h1>
                <p class="text-xl text-gray-500 mb-6" id="hero-titles"></p>
                <div class="flex flex-wrap gap-3 mb-8" id="hero-tags"></div>
                <div class="flex space-x-4 print:hidden">
                    <a href="#contact" class="bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary/90">Contact</a>
                    <a href="#experience" class="bg-white border hover:border-primary hover:text-primary px-6 py-3 rounded-lg">Experience</a>
                </div>
            </div>
            <div class="md:w-1/2 flex justify-center">
                <div class="w-64 h-64 md:w-80 md:h-80 rounded-full bg-gradient-to-br from-primary to-secondary p-1">
                    <div class="w-full h-full rounded-full bg-white flex items-center justify-center overflow-hidden">
                        <img src="https://media.licdn.com/dms/image/v2/D5603AQHecicv7mUqOg/profile-displayphoto-crop_800_800/B56ZswsH0jIcAI-/0/1766048432646?e=1768435200&v=beta&t=BkiaseFt8ML5h06QVVKJvFSBm3Br-oRYknrHXu4bjN4" class="w-full h-full object-cover">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="profile" class="py-20 bg-white print:py-5">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-center text-gray-700 mb-4">Profile</h2>
            <div class="w-20 h-1 bg-primary mx-auto mb-12"></div>
            
            <div class="bg-gray-50 p-8 rounded-xl shadow-sm print:border">
                <p class="text-gray-600 mb-8 text-lg leading-relaxed" id="profile-summary"></p>
                <div class="grid md:grid-cols-3 gap-6" id="profile-cards-container">
                    </div>
            </div>
        </div>
    </section>

    <section id="skills" class="py-20 bg-gray-50 print:py-5">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-center text-gray-700 mb-4">Skills Matrix</h2>
            <div class="w-20 h-1 bg-primary mx-auto mb-16"></div>
            
            <div class="grid md:grid-cols-3 gap-8 mb-16" id="skills-matrix-container">
                </div>

            <div class="bg-white p-8 rounded-xl shadow-sm grid md:grid-cols-2 gap-8 items-center print:border">
                <div class="flex justify-center"><div class="w-full max-w-sm"><canvas id="skillsChart"></canvas></div></div>
                <div class="space-y-6" id="chart-bars-container">
                    </div>
            </div>
        </div>
    </section>

    <section id="experience" class="py-20 bg-white print:py-5">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-center text-gray-700 mb-4">Experience</h2>
            <div class="w-20 h-1 bg-primary mx-auto mb-16"></div>
            <div class="max-w-5xl mx-auto space-y-12" id="experience-container">
                </div>
        </div>
    </section>

    <section id="education" class="py-20 bg-gray-50 print:py-5">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-center text-gray-700 mb-4">Education & Tools</h2>
            <div class="w-20 h-1 bg-primary mx-auto mb-16"></div>
            
            <div class="grid md:grid-cols-2 gap-8">
                <div class="bg-white p-8 rounded-xl shadow-sm print:border">
                    <h3 class="font-semibold text-xl text-gray-700 mb-6"><i class="fa fa-graduation-cap text-primary"></i> Education</h3>
                    <div id="education-container" class="space-y-6 border-l-2 border-primary/30 pl-6"></div>
                    
                    <h3 class="font-semibold text-xl text-gray-700 mt-10 mb-6"><i class="fa fa-heart text-primary"></i> Hobbies</h3>
                    <div id="hobbies-container" class="flex flex-wrap gap-3"></div>
                </div>
                
                <div class="bg-white p-8 rounded-xl shadow-sm print:border">
                    <h3 class="font-semibold text-xl text-gray-700 mb-6"><i class="fa fa-wrench text-primary"></i> Design Tools</h3>
                    <div id="tools-design" class="grid grid-cols-2 gap-3 mb-8"></div>
                    
                    <h3 class="font-semibold text-xl text-gray-700 mb-6"><i class="fa fa-database text-primary"></i> Data Tools</h3>
                    <div id="tools-data" class="grid grid-cols-2 gap-3"></div>
                </div>
            </div>
        </div>
    </section>

    <section id="contact" class="py-20 bg-white print:py-5">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-3xl font-bold mb-12">Contact</h2>
            <div class="bg-gray-50 max-w-2xl mx-auto p-8 rounded-xl flex flex-col md:flex-row justify-around items-center gap-6 print:border">
                <div><i class="fa fa-envelope text-primary text-xl mb-2"></i><p id="contact-email" class="text-gray-600 font-medium"></p></div>
                <div><i class="fa fa-map-marker text-primary text-xl mb-2"></i><p id="contact-location" class="text-gray-600 font-medium"></p></div>
            </div>
        </div>
    </section>

    <footer class="bg-gray-700 text-white py-8 text-center print:hidden">
        <p class="text-gray-400">© 2025 Xu Yongzhi. Built with GitHub Pages.</p>
    </footer>

    <script>
        let currentLang = localStorage.getItem('lang') || 'zh';
        let chartInstance = null;

        document.addEventListener('DOMContentLoaded', () => {
            fetchData();
            document.getElementById('langSwitch').addEventListener('click', toggleLang);
        });

        async function fetchData() {
            try {
                // 读取本地 JSON
                const res = await fetch('./data.json');
                const allData = await res.json();
                render(allData[currentLang]);
            } catch(e) { console.error(e); }
        }

        function toggleLang() {
            currentLang = currentLang === 'zh' ? 'en' : 'zh';
            localStorage.setItem('lang', currentLang);
            document.getElementById('langSwitch').innerText = currentLang === 'zh' ? 'EN' : '中文';
            fetchData();
        }

        function render(data) {
            // Basics
            document.getElementById('nav-name').innerText = data.basics.name;
            document.getElementById('hero-name').innerText = data.basics.name;
            document.getElementById('hero-titles').innerText = data.basics.titles;
            document.getElementById('hero-tags').innerHTML = data.basics.tags.map(t => 
                `<span class="bg-primary/10 text-primary px-4 py-2 rounded-full text-sm font-medium">${t}</span>`
            ).join('');
            document.getElementById('profile-summary').innerText = data.basics.summary;
            document.getElementById('contact-email').innerText = data.basics.email;
            document.getElementById('contact-location').innerText = data.basics.location;

            // Profile Cards
            document.getElementById('profile-cards-container').innerHTML = data.profile_cards.map(card => `
                <div class="bg-white p-6 rounded-lg shadow-sm card-hover border border-gray-100">
                    <div class="text-primary text-3xl mb-4"><i class="fa ${card.icon}"></i></div>
                    <h3 class="font-semibold text-lg mb-2">${card.title}</h3>
                    <p class="text-gray-500 text-sm leading-relaxed">${card.desc}</p>
                </div>
            `).join('');

            // Skills Matrix
            document.getElementById('skills-matrix-container').innerHTML = data.skills_matrix.map(col => `
                <div class="bg-white rounded-xl shadow-sm overflow-hidden card-hover border border-gray-100">
                    <div class="bg-primary/10 px-6 py-4 border-b border-gray-100 flex items-center gap-2">
                        <i class="fa ${col.icon} text-primary text-xl"></i>
                        <h3 class="font-semibold text-xl text-primary">${col.title}</h3>
                    </div>
                    <div class="p-6">
                        <ul class="space-y-3">
                            ${col.items.map(item => `<li class="flex items-start gap-3 text-sm text-gray-600"><i class="fa fa-check-circle text-secondary mt-1"></i><span>${item}</span></li>`).join('')}
                        </ul>
                    </div>
                </div>
            `).join('');

            // Chart
            renderChart(data.chart_data);
            document.getElementById('chart-bars-container').innerHTML = data.chart_data.map(d => `
                <div>
                    <div class="flex justify-between mb-1"><span class="font-medium text-sm">${d.label}</span><span class="text-sm text-gray-500">${d.value}%</span></div>
                    <div class="progress-bar" style="--progress: ${d.value}%"></div>
                </div>
            `).join('');

            // Experience
            document.getElementById('experience-container').innerHTML = data.experience.map(job => `
                <div class="flex flex-col md:flex-row gap-6 relative">
                    <div class="md:w-1/4">
                        <div class="bg-primary/10 p-4 rounded-lg text-center md:sticky md:top-24 border border-primary/20">
                            <h3 class="font-bold text-primary text-lg leading-tight mb-1">${job.company}</h3>
                            <p class="text-gray-500 text-xs mb-2">${job.date}</p>
                            <p class="text-gray-700 font-medium text-sm">${job.role}</p>
                            <p class="text-gray-400 text-xs mt-1"><i class="fa fa-map-marker"></i> ${job.location}</p>
                        </div>
                    </div>
                    <div class="md:w-3/4 space-y-4">
                        ${job.phases.map(phase => `
                            <div class="bg-gray-50 p-5 rounded-lg border border-gray-200 hover:border-primary/30 transition-colors">
                                <h4 class="font-semibold text-md mb-3 text-gray-800">${phase.title}</h4>
                                <ul class="space-y-2 text-gray-600 text-sm">
                                    ${phase.items.map(item => `<li class="flex items-start gap-2"><i class="fa fa-angle-right text-primary mt-1"></i><span>${item}</span></li>`).join('')}
                                </ul>
                            </div>
                        `).join('')}
                    </div>
                </div>
                <hr class="border-gray-200 my-8 last:hidden">
            `).join('');

            // Education
            document.getElementById('education-container').innerHTML = data.education.map(edu => `
                <div>
                    <h4 class="font-medium text-lg text-gray-800">${edu.school}</h4>
                    <p class="text-gray-600 text-sm">${edu.degree}</p>
                    <p class="text-gray-400 text-xs mt-1">${edu.date_loc}</p>
                </div>
            `).join('');

            // Hobbies & Tools
            document.getElementById('hobbies-container').innerHTML = data.hobbies.map(h => 
                `<span class="bg-gray-100 text-gray-600 px-4 py-2 rounded-full text-xs">${h}</span>`
            ).join('');

            const renderTools = (list) => list.map(t => `<div class="flex items-center gap-2 bg-gray-50 p-2 rounded border border-gray-100 text-sm text-gray-600"><i class="fa fa-cube text-secondary"></i><span>${t}</span></div>`).join('');
            document.getElementById('tools-design').innerHTML = renderTools(data.tools.design);
            document.getElementById('tools-data').innerHTML = renderTools(data.tools.data);
        }

        function renderChart(data) {
            const ctx = document.getElementById('skillsChart');
            if (chartInstance) chartInstance.destroy();
            chartInstance = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: data.map(d => d.label),
                    datasets: [{
                        label: 'Proficiency',
                        data: data.map(d => d.value),
                        backgroundColor: 'rgba(22, 93, 255, 0.2)',
                        borderColor: '#165DFF',
                        pointBackgroundColor: '#165DFF'
                    }]
                },
                options: { scales: { r: { suggestedMin: 50, suggestedMax: 100 } }, plugins: { legend: { display: false } } }
            });
        }
    </script>
</body>
</html>
