// --- 核心功能：渲染 Markdown 风格打印视图 (动态生成版) ---
        function renderPrintView(data, ui) {
            const basic = data.basic_info;
            const st = ui.section_titles;
            
            // 核心能力矩阵：从 skills.card_groups 生成表格行
            // 用中文分号或英文分号+空格连接数组内容
            const separator = currentLang === 'zh' ? '；' : '; ';
            
            const matrixRows = data.skills.card_groups.map(group => `
                <tr>
                    <td>${group.title}</td>
                    <td>${group.items.join(separator)}</td>
                </tr>
            `).join('');

            const toolsHtml = data.tools.map(t => `
                <li><strong>${t.group}：</strong> ${t.list.join(', ')}</li>
            `).join('');

            let html = `
                <div class="print-h1">${basic.name}</div>
                <div class="print-meta">
                    <ul class="print-list" style="margin:0; padding-left: 1.2rem;">
                        <li><strong>${basic.objective.label}：</strong> ${basic.objective.items.join(' | ')}</li>
                        <li><strong>${data.ui.contact_labels.location}：</strong> ${basic.location.split('.')[0]} | <strong>${data.ui.contact_labels.email}：</strong> ${basic.email}</li>
                    </ul>
                </div>

                <div class="print-section">
                    <div class="print-h2">${st.profile}</div>
                    <div style="text-align: justify;">
                        ${data.profile.summary}
                    </div>
                </div>

                <div class="print-section">
                    <div class="print-h2">${st.skills}</div>
                    <table class="print-table">
                        <thead>
                            <tr>
                                <th width="18%">${currentLang === 'zh' ? '能力类别' : 'Category'}</th>
                                <th>${currentLang === 'zh' ? '核心内容' : 'Core Competencies'}</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${matrixRows}
                        </tbody>
                    </table>
                </div>

                <div class="print-section">
                    <div class="print-h2">${st.experience}</div>
                    ${data.experience.map(exp => `
                        <div class="no-break" style="margin-bottom: 1.2rem;">
                            <div class="print-h3">
                                <span>${exp.company}</span>
                            </div>
                            <div class="job-sub-row">
                                <span>${exp.role}</span>
                                <span>${exp.location} | ${exp.date}</span>
                            </div>
                            
                            ${exp.projects.map(p => `
                                <div style="margin-top: 0.5rem;">
                                    ${p.title ? `<div class="job-phase-title">${p.title}</div>` : ''}
                                    <ul class="print-list">
                                        ${p.details.map(d => `<li>${d}</li>`).join('')}
                                    </ul>
                                </div>
                            `).join('')}
                        </div>
                    `).join('')}
                </div>

                <div class="print-section no-break">
                    <div class="print-h2">${st.education}</div>
                    ${data.education.map(edu => `
                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem; font-size: 10.5pt;">
                            <div><strong>${edu.school}</strong> | ${edu.degree}</div>
                            <div>${edu.location} | ${edu.date}</div>
                        </div>
                    `).join('')}
                </div>

                <div class="print-section no-break">
                    <div class="print-h2">${currentLang === 'zh' ? '技能与兴趣' : 'Skills & Interests'}</div>
                    <ul class="print-list">
                        ${toolsHtml}
                        <li><strong>${st.hobbies}：</strong> ${data.hobbies.items.join('、')}，${data.hobbies.desc}</li>
                    </ul>
                </div>
            `;
            
            document.getElementById('print-view').innerHTML = html;
        }
