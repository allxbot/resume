<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume Loading...</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = { 
            theme: { 
                extend: { 
                    colors: { 
                        primary: 'var(--color-primary)', 
                        secondary: 'var(--color-secondary)',
                        'page-bg': 'var(--color-bg)',
                        'card-bg': 'var(--color-card)',
                        'text-main': 'var(--color-text-main)',
                        'text-muted': 'var(--color-text-muted)',
                        'text-body': 'var(--color-text-body)', /* Êñ∞Â¢ûÔºö‰∏ìÈó®Áî®‰∫éÊ≠£ÊñáÊµÖËâ≤Â≠ó */
                        'btn-bg': 'var(--color-btn-bg)', 
                        'btn-text': 'var(--color-btn-text)',
                        'date-bg': 'var(--color-date-bg)', /* Êñ∞Â¢ûÔºöÊó•ÊúüËÉåÊôØËâ≤ */
                        'gray-block': 'var(--color-gray-block)', /* Êñ∞Â¢ûÔºöÂ∫ïÈÉ®ÁÅ∞Ëâ≤Âùó */
                        'section-glass': 'var(--color-section-glass)', /* Êñ∞Â¢ûÔºöÂå∫ÂüüÂçäÈÄèÊòéÁôΩ */
                        
                        /* ÂõæÊ†áÈ¢úËâ≤ÂèòÈáè */
                        'icon-1': 'var(--color-icon-1)',
                        'icon-2': 'var(--color-icon-2)',
                        'icon-3': 'var(--color-icon-3)',
                        
                        'border-color': 'var(--color-border)',
                        'check-color': 'var(--check-color)'
                    },
                    boxShadow: { 
                        'custom': 'var(--box-shadow)',
                        'custom-hover': 'var(--box-shadow-hover)'
                    },
                    borderRadius: {
                        'custom': 'var(--radius-card)',
                        'custom-btn': 'var(--radius-btn)'
                    }
                } 
            } 
        }
    </script>

    <style type="text/tailwindcss">
        @layer utilities { 
            .progress-bar { height: 6px; background: linear-gradient(90deg, var(--color-primary) var(--progress), #e5e7eb var(--progress)); border-radius: 4px; } 
        }

        /* =========================================
           üé® ÊúÄÁªà‰∏ªÈ¢òÂÆö‰πâ
           ========================================= */
        
        /* 0. Ô£ø Apple Theme (ÂÉèÁ¥†Á∫ßËøòÂéü) */
        :root[data-theme='apple'] {
            --font-main: 'Inter', -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif;
            --color-primary: #0071e3;
            --color-secondary: #42a5f5;
            --color-bg: #fbfbfd;
            --color-card: #ffffff;
            
            --color-text-main: #111827; /* gray-900 */
            --color-text-muted: #6b7280; /* gray-500 */
            --color-text-body: #4b5563; /* gray-600 (Â∑•‰ΩúÁªèÂéÜÊ≠£ÊñáÈ¢úËâ≤) */
            
            --color-btn-bg: #000000;    /* ÈªëËâ≤ÊåâÈíÆ */
            --color-btn-text: #ffffff;
            
            --color-date-bg: #eff6ff;   /* blue-50 (Êó•ÊúüÊµÖËâ≤ËÉåÊôØ) */
            --color-gray-block: #f9fafb; /* gray-50 (Â∫ïÈÉ®ÁÅ∞Ëâ≤Âç°Áâá) */
            --color-section-glass: rgba(255, 255, 255, 0.5); /* bg-white/50 */

            --radius-card: 2rem; 
            --radius-btn: 9999px; 
            
            --box-shadow: 0 4px 20px rgba(0,0,0,0.06); 
            --box-shadow-hover: 0 10px 30px rgba(0,0,0,0.1); 
            
            --color-border: #f3f4f6; /* gray-100 */
            
            /* ÂõæÊ†áÂæ™ÁéØËâ≤ */
            --color-icon-1: #f97316; /* orange-500 */
            --color-icon-2: #a855f7; /* purple-500 */
            --color-icon-3: #14b8a6; /* teal-500 */
            
            --hero-blur-start: rgba(239, 246, 255, 0.8); /* blue-50 approx */
            --check-color: #d1d5db; /* gray-300 */
        }

        /* 1. Modern Theme */
        :root[data-theme='modern'] {
            --font-main: 'Inter', sans-serif;
            --color-primary: #3b82f6; 
            --color-secondary: #60a5fa;
            --color-bg: #f3f4f6;
            --color-card: #ffffff;
            --color-text-main: #1f2937;
            --color-text-muted: #6b7280;
            --color-text-body: #4b5563;
            --color-btn-bg: #3b82f6;
            --color-btn-text: #ffffff;
            --color-date-bg: #eff6ff;
            --color-gray-block: #f3f4f6;
            --color-section-glass: transparent;
            --color-border: #e5e7eb;
            --radius-card: 1.5rem;
            --radius-btn: 0.75rem;
            --box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --box-shadow-hover: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --color-icon-1: #3b82f6; --color-icon-2: #3b82f6; --color-icon-3: #3b82f6;
            --hero-blur-start: rgba(59, 130, 246, 0.15);
            --check-color: #93c5fd;
        }

        /* 2. Classic Theme */
        :root[data-theme='classic'] {
            --font-main: 'Playfair Display', serif;
            --color-primary: #1e3a8a; 
            --color-secondary: #d4af37;
            --color-bg: #f8f9fa;
            --color-card: #ffffff;
            --color-text-main: #0f172a;
            --color-text-muted: #475569;
            --color-text-body: #334155;
            --color-btn-bg: #1e3a8a;
            --color-btn-text: #ffffff;
            --color-date-bg: #e2e8f0;
            --color-gray-block: #f1f5f9;
            --color-section-glass: transparent;
            --color-border: #cbd5e1;
            --radius-card: 0px; 
            --radius-btn: 2px;
            --box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            --box-shadow-hover: 0 4px 6px rgba(0,0,0,0.1);
            --color-icon-1: #1e3a8a; --color-icon-2: #1e3a8a; --color-icon-3: #1e3a8a;
            --hero-blur-start: rgba(30, 58, 138, 0.05);
            --check-color: #cbd5e1;
        }

        /* 3. Geek Theme */
        :root[data-theme='geek'] {
            --font-main: 'JetBrains Mono', monospace;
            --color-primary: #10b981;
            --color-secondary: #3b82f6;
            --color-bg: #0f172a;
            --color-card: #1e293b;
            --color-text-main: #e2e8f0;
            --color-text-muted: #94a3b8;
            --color-text-body: #cbd5e1;
            --color-btn-bg: #10b981;
            --color-btn-text: #0f172a;
            --color-date-bg: #064e3b;
            --color-gray-block: #1e293b;
            --color-section-glass: transparent;
            --color-border: #334155;
            --radius-card: 4px;
            --radius-btn: 4px;
            --box-shadow: none;
            --box-shadow-hover: 0 0 0 2px #10b981;
            --color-icon-1: #10b981; --color-icon-2: #10b981; --color-icon-3: #10b981;
            --hero-blur-start: rgba(16, 185, 129, 0.1);
            --check-color: #334155;
        }

        body {
            font-family: var(--font-main);
            background-color: var(--color-bg);
            color: var(--color-text-main);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            letter-spacing: -0.01em;
            transition: background-color 0.3s, color 0.3s;
        }

        /* ÈÄöÁî®Âç°ÁâáÁ±ª */
        .theme-card {
            background-color: var(--color-card);
            border-radius: var(--radius-card);
            box-shadow: var(--box-shadow);
            border: var(--border-width) var(--border-style) var(--border-color);
        }
        .theme-card:hover {
            box-shadow: var(--box-shadow-hover);
        }
        .theme-btn {
            border-radius: var(--radius-btn);
        }

        /* ProfileÂç°ÁâáÂú®AppleÊ®°Âºè‰∏ãÈúÄË¶ÅÊòØ gray-50 ÊÇ¨ÂÅúÂèòÁôΩÔºåËøôÈáåÈÄöËøá JS ÊàñÂèòÈáèÂæÆË∞É */
        /* ‰∏∫‰∫ÜÁÆÄÂåñÔºåÊàë‰ª¨‰ΩøÁî® theme-card ‰Ωú‰∏∫‰∏ªÂç°ÁâáÔºåtheme-gray-block ‰Ωú‰∏∫ÊµÖÁÅ∞Âùó */
        
        :root[data-theme='classic'] body { font-family: 'Inter', sans-serif; }
        :root[data-theme='classic'] h1, :root[data-theme='classic'] h2, :root[data-theme='classic'] h3 { font-family: 'Playfair Display', serif; }

        .reveal-hidden {
            opacity: 0;
            transform: translateY(30px) scale(0.98);
            transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
            will-change: transform, opacity;
        }
        .reveal-visible { opacity: 1; transform: translateY(0) scale(1); }
        .tilt-container { perspective: 1000px; transform-style: preserve-3d; }

        #print-view { display: none; }
        @media print {
            #screen-view, header, #backToTop, #wechatModal, .no-print, .tilt-container { display: none !important; }
            @page { size: A4; margin: 15mm 15mm; }
            html, body { width: 210mm; height: auto; margin: 0 !important; padding: 0 !important; background-color: white !important; color: #000 !important; overflow: visible !important; font-family: "Microsoft YaHei", sans-serif !important; }
            #print-view { display: block !important; width: 100%; font-size: 9.5pt; line-height: 1.35; text-align: justify; }
            .print-h1 { font-size: 20pt; font-weight: bold; line-height: 1.2; margin-bottom: 4pt; color: #000; }
            .print-h2 { font-size: 12pt; font-weight: bold; border-bottom: 1pt solid #000; margin-top: 10pt; margin-bottom: 4pt; padding-bottom: 2pt; page-break-after: avoid; }
            .print-h3 { font-size: 10pt; font-weight: bold; margin-top: 6pt; margin-bottom: 2pt; display: flex; justify-content: space-between; page-break-after: avoid; }
            .print-meta { font-size: 9pt; margin-bottom: 8pt; line-height: 1.4; }
            .print-table { width: 100%; border-collapse: collapse; margin-bottom: 8pt; font-size: 9pt; page-break-inside: auto; }
            .print-table th, .print-table td { border: 1pt solid #333; padding: 3pt 5pt; vertical-align: top; }
            .print-table td:first-child { font-weight: bold; white-space: nowrap; background-color: #f2f2f2 !important; width: 1%; }
            .print-list { list-style-type: disc; padding-left: 1.2em; margin-top: 2pt; margin-bottom: 0; }
            .print-list li { margin-bottom: 2pt; }
            .job-sub-row { font-weight: bold; font-size: 9.5pt; margin-bottom: 3pt; display: flex; justify-content: space-between; border-bottom: 0.5pt dashed #999; padding-bottom: 2pt; }
            .job-phase-title { font-weight: bold; margin-top: 4pt; margin-bottom: 2pt; font-size: 9.5pt; }
            section, .print-section { page-break-inside: auto !important; break-inside: auto !important; }
            .no-break { page-break-inside: auto; break-inside: auto; margin-bottom: 8pt; }
            a { text-decoration: none !important; color: #000 !important; }
        }
        #mobile-menu { transition: max-height 0.4s; max-height: 0; opacity: 0; overflow: hidden; }
        #mobile-menu.open { max-height: 400px; opacity: 1; }
    </style>
</head>
<body class="selection:bg-primary/20 selection:text-primary">

    <div id="screen-view">
        <header id="navbar" class="fixed w-full top-0 left-0 transition-all duration-300 z-50 py-4 bg-transparent print:hidden">
            <div class="container mx-auto px-4 md:px-6">
                <div class="flex justify-between items-center">
                    <a href="#" class="text-xl font-bold text-main tracking-tight flex items-center gap-2" id="nav-name"></a>
                    <div class="hidden md:flex items-center gap-1 px-2" id="nav-pill">
                        <nav class="flex text-sm font-medium text-muted space-x-1" id="nav-menu-desktop"></nav>
                        <div class="w-px h-4 bg-gray-300 mx-3"></div>
                        <button id="langSwitch" class="flex items-center gap-1 px-3 py-1.5 rounded-full text-xs font-semibold hover:bg-black/5 transition text-muted hover:text-main theme-btn">
                            <i class="fa fa-globe"></i> <span id="langLabel">EN</span>
                        </button>
                    </div>
                    <div class="flex items-center gap-4 md:hidden">
                        <button id="langSwitchMobile" class="border border-gray-200 px-2 py-1 rounded text-xs font-medium hover:border-primary text-muted theme-btn">
                            <span id="langLabelMobile">EN</span>
                        </button>
                        <button id="mobile-menu-btn" class="text-muted hover:text-main focus:outline-none transition p-1"><i class="fa fa-bars text-2xl"></i></button>
                    </div>
                </div>
                <div id="mobile-menu" class="md:hidden border-t mt-3 border-gray-200/50">
                    <nav class="flex flex-col space-y-2 py-4" id="nav-menu-mobile"></nav>
                </div>
            </div>
        </header>

        <section class="pt-40 pb-20 relative overflow-hidden print:pt-10">
            <div id="hero-bg-blur" class="absolute top-0 left-1/2 -translate-x-1/2 w-[1000px] h-[600px] rounded-[100%] blur-3xl -z-10 opacity-60 print:hidden transition-colors" style="background: linear-gradient(to bottom, var(--hero-blur-start), transparent);"></div>
            
            <div class="container mx-auto px-4 md:px-6 flex flex-col md:flex-row items-center gap-12 md:gap-20">
                <div class="md:w-1/2 text-center md:text-left z-10">
                    <h1 class="text-4xl md:text-6xl font-bold text-main mb-6 leading-tight tracking-tight reveal-hidden" id="hero-name"></h1>
                    <p class="text-xl md:text-2xl text-muted mb-8 font-light reveal-hidden" style="transition-delay: 100ms" id="hero-title"></p>
                    <div class="flex flex-wrap justify-center md:justify-start gap-3 mb-10 reveal-hidden" style="transition-delay: 200ms" id="hero-tags"></div>
                    <div class="flex flex-wrap justify-center md:justify-start gap-4 print:hidden reveal-hidden" style="transition-delay: 300ms" id="hero-btns"></div>
                </div>
                <div class="md:w-1/2 flex justify-center tilt-container reveal-hidden" style="transition-delay: 200ms">
                    <div id="hero-tilt" class="relative w-64 h-64 md:w-80 md:h-80 transition-transform duration-100 ease-out cursor-pointer group">
                        <div class="absolute inset-0 rounded-full bg-gradient-to-tr from-primary/30 to-secondary/30 blur-2xl opacity-40 group-hover:opacity-60 transition-opacity duration-500 print:hidden"></div>
                        
                        <div class="w-full h-full rounded-full bg-card-bg p-1.5 shadow-custom relative overflow-hidden border border-white/50">
                            <img id="hero-avatar" src="" alt="Profile" class="w-full h-full rounded-full object-cover">
                        </div>
                        
                        <div class="absolute bottom-4 right-4 bg-white/90 backdrop-blur shadow-lg px-4 py-2 rounded-full border border-white/50 flex items-center gap-2 transform translate-z-10 group-hover:scale-105 transition print:hidden">
                            <i class="fa fa-map-marker text-red-500"></i>
                            <span class="text-xs font-semibold text-gray-700" id="hero-location"></span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="profile" class="py-20 bg-section-glass reveal-hidden print:py-5">
            <div class="container mx-auto px-4 md:px-6 max-w-5xl">
                <div class="text-center mb-12"><h2 class="text-3xl font-bold text-main" id="t-profile"></h2></div>
                <div class="theme-card p-8 md:p-12">
                    <p class="text-muted mb-10 leading-relaxed text-lg" id="profile-summary"></p>
                    <div class="grid md:grid-cols-3 gap-6" id="profile-cards"></div>
                </div>
            </div>
        </section>

        <section id="skills" class="py-20 reveal-hidden print:py-5 print:break-inside-avoid">
            <div class="container mx-auto px-4 md:px-6">
                <div class="text-center mb-12"><h2 class="text-3xl font-bold text-main" id="t-skills"></h2></div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6" id="skills-bento-container"></div>
            </div>
        </section>

        <section id="experience" class="py-20 bg-section-glass print:py-5">
            <div class="container mx-auto px-4 md:px-6">
                <div class="text-center mb-16"><h2 class="text-3xl font-bold text-main" id="t-exp"></h2></div>
                <div class="max-w-5xl mx-auto space-y-12" id="exp-list"></div>
            </div>
        </section>

        <section id="education" class="py-20 print:py-5 print:break-inside-avoid">
            <div class="container mx-auto px-4 md:px-6">
                <div class="text-center mb-16"><h2 class="text-3xl font-bold text-main" id="t-edu"></h2></div>
                <div class="grid md:grid-cols-2 gap-8" id="edu-container">
                    <div class="theme-card p-8 h-full reveal-hidden" id="edu-col-left"></div>
                    <div class="theme-card p-8 h-full reveal-hidden" style="transition-delay: 100ms" id="edu-col-right"></div>
                </div>
            </div>
        </section>

        <section id="contact" class="py-24 border-t border-gray-200/20 print:py-5 print:break-inside-avoid bg-card-bg">
            <div class="container mx-auto px-4 md:px-6">
                <div class="max-w-4xl mx-auto bg-gray-block theme-card shadow-inner p-8 md:p-12 reveal-hidden" id="contact-area"></div>
            </div>
        </section>

        <footer class="bg-gray-block text-muted py-12 print:hidden text-center border-t border-gray-200/20">
            <h3 class="text-lg font-bold text-main mb-2" id="f-name"></h3>
            <p class="text-sm mb-6" id="f-desc"></p>
            <div class="flex justify-center space-x-6 mb-8" id="social-icons"></div>
            <p class="text-xs opacity-60">¬© 2026 <span id="copyright-name"></span>. All rights reserved.</p>
        </footer>

        <button id="backToTop" class="fixed bottom-8 right-8 w-12 h-12 bg-white/80 backdrop-blur-md border border-gray-200/50 rounded-full shadow-lg flex items-center justify-center text-muted hover:text-main hover:scale-110 hover:-translate-y-1 transition-all duration-500 z-40 opacity-0 invisible translate-y-4 group">
            <i class="fa fa-arrow-up transition-transform duration-300 group-hover:-translate-y-0.5"></i>
        </button>

        <div id="wechatModal" class="hidden fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-md p-4 transition-opacity duration-300" onclick="this.classList.add('hidden')">
            <div class="bg-white p-8 rounded-2xl shadow-2xl max-w-sm w-full text-center transform scale-100 transition-transform duration-300" onclick="event.stopPropagation()">
                <h3 id="modal-title" class="text-xl font-bold mb-6 text-gray-900">Scan QR Code</h3>
                <div class="bg-gray-100 p-3 rounded-xl inline-block mb-6 shadow-inner">
                    <img id="modal-qr" src="" class="w-48 h-48 object-contain mix-blend-multiply">
                </div>
                <p class="text-gray-500 font-mono text-sm bg-gray-50 py-2 px-4 rounded-lg border border-gray-100 inline-block" id="modal-text"></p>
                <div class="mt-8"><button onclick="document.getElementById('wechatModal').classList.add('hidden')" class="text-sm font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 px-4 py-2 rounded-full transition">Close</button></div>
            </div>
        </div>
    </div>
    
    <div id="print-view"></div>

    <script>
        let currentLang = localStorage.getItem('lang') || 'zh';
        let myChart = null;

        function stripHtml(html) { let tmp = document.createElement("DIV"); tmp.innerHTML = html; return tmp.textContent || tmp.innerText || ""; }

        document.addEventListener('DOMContentLoaded', () => {
            loadResume();
            document.getElementById('langSwitch').addEventListener('click', toggleLanguage);
            document.getElementById('langSwitchMobile').addEventListener('click', toggleLanguage);
            
            const navbar = document.getElementById('navbar');
            const mobileMenu = document.getElementById('mobile-menu');
            window.addEventListener('scroll', () => {
                const isScrolled = window.scrollY > 50;
                const isMenuOpen = mobileMenu.classList.contains('open');
                if (isScrolled || isMenuOpen) {
                    navbar.classList.remove('bg-transparent', 'py-4');
                    navbar.classList.add('bg-page-bg/90', 'backdrop-blur-xl', 'border-b', 'border-gray-200/50', 'py-3');
                } else {
                    navbar.classList.add('bg-transparent', 'py-4');
                    navbar.classList.remove('bg-page-bg/90', 'backdrop-blur-xl', 'border-b', 'border-gray-200/50', 'py-3');
                }
                
                const backToTop = document.getElementById('backToTop');
                if (window.scrollY > 300) { backToTop.classList.remove('opacity-0', 'invisible', 'translate-y-4'); backToTop.classList.add('opacity-100', 'visible', 'translate-y-0'); } 
                else { backToTop.classList.add('opacity-0', 'invisible', 'translate-y-4'); backToTop.classList.remove('opacity-100', 'visible', 'translate-y-0'); }
            });
            document.getElementById('mobile-menu-btn').addEventListener('click', () => { mobileMenu.classList.toggle('open'); });
            document.getElementById('backToTop').addEventListener('click', () => { window.scrollTo({ top: 0, behavior: 'smooth' }); });
        });

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('reveal-visible'); observer.unobserve(entry.target); } });
        }, { threshold: 0.1 });

        async function loadResume() {
            try {
                const res = await fetch('./data.json');
                const fullData = await res.json();
                const data = fullData[currentLang];
                
                const theme = fullData[currentLang].ui.theme || 'apple';
                document.documentElement.setAttribute('data-theme', theme);
                
                if(fullData['en']) document.getElementById('copyright-name').textContent = fullData['en'].basic_info.name;
                render(data, theme);
                renderPrintView(data, fullData[currentLang].ui); 
                
                setTimeout(() => { document.querySelectorAll('.reveal-hidden').forEach(el => observer.observe(el)); }, 100);
            } catch(e) { console.error(e); }
        }

        function toggleLanguage() {
            currentLang = currentLang === 'zh' ? 'en' : 'zh';
            localStorage.setItem('lang', currentLang);
            loadResume();
        }

        function render(data, theme) {
            const basic = data.basic_info;
            const ui = data.ui;
            const labelLang = currentLang === 'zh' ? 'EN' : '‰∏≠Êñá';
            
            document.title = `${basic.name} - ${currentLang === 'zh' ? 'ÁÆÄÂéÜ' : 'Resume'}`;
            document.getElementById('langLabel').textContent = labelLang;
            document.getElementById('langLabelMobile').textContent = labelLang;
            document.getElementById('nav-name').textContent = basic.name;
            
            const links = ['profile','skills','experience','education','contact'];
            const navHTML = ui.nav.map((n, i) => `<a href="#${links[i]}" class="px-3 py-2 rounded-full hover:bg-gray-200/50 hover:text-main transition-colors theme-btn" onclick="document.getElementById('mobile-menu').classList.remove('open');">${n}</a>`).join('');
            document.getElementById('nav-menu-desktop').innerHTML = navHTML;
            document.getElementById('nav-menu-mobile').innerHTML = navHTML;

            document.getElementById('hero-name').textContent = basic.name;
            document.getElementById('hero-title').textContent = basic.titles;
            document.getElementById('hero-tags').innerHTML = basic.tags.map(t => `<span class="bg-white/50 backdrop-blur border border-gray-200/50 text-muted px-4 py-1.5 rounded-full text-sm font-medium shadow-sm">${t}</span>`).join('');
            
            // ÊåâÈíÆ: Contact ‰ΩøÁî®Á∫ØÈªëÂèòÈáè(Apple)ÔºåExperience ‰ΩøÁî®ÁôΩËâ≤
            document.getElementById('hero-btns').innerHTML = `
                <a href="#contact" class="bg-btn-bg text-btn-text px-8 py-3 font-medium hover:bg-opacity-80 hover:scale-105 transition-all duration-300 shadow-lg theme-btn flex items-center"><i class="fa fa-envelope mr-2"></i> ${ui.buttons.contact}</a>
                <a href="#experience" class="bg-white text-main border border-border-color px-8 py-3 font-medium hover:bg-gray-50 transition-all hover:scale-105 shadow-sm theme-btn flex items-center"><i class="fa fa-briefcase mr-2"></i> ${ui.buttons.exp}</a>
                <button onclick="window.print()" class="bg-white text-main border border-border-color px-8 py-3 font-medium hover:bg-gray-50 transition-all hover:scale-105 shadow-sm theme-btn flex items-center gap-2"><i class="fa fa-print"></i> ${ui.buttons.print}</button>
            `;
            document.getElementById('hero-avatar').src = basic.avatar;
            document.getElementById('hero-location').textContent = basic.location;

            document.getElementById('t-profile').textContent = ui.section_titles.profile;
            document.getElementById('profile-summary').innerHTML = data.profile.summary;
            document.getElementById('profile-cards').innerHTML = data.profile.cards.map((c, i) => `
                <div class="group bg-gray-block p-6 transition-all duration-300 reveal-hidden hover:bg-card-bg hover:shadow-custom-hover rounded-custom" style="transition-delay: ${i*100}ms">
                    <div class="w-10 h-10 rounded-xl bg-blue-100 text-blue-600 flex items-center justify-center text-lg mb-4 group-hover:scale-110 transition-transform"><i class="fa ${c.icon}"></i></div>
                    <h3 class="font-bold text-main mb-2">${c.title}</h3>
                    <p class="text-sm text-muted leading-relaxed">${c.desc}</p>
                </div>`).join('');

            document.getElementById('t-skills').textContent = ui.section_titles.skills;
            const bentoContainer = document.getElementById('skills-bento-container');
            const chartData = data.skills.chart;
            const chartColor = theme === 'geek' ? '#10b981' : (theme === 'classic' ? '#1e3a8a' : '#0071e3');
            
            let bentoHTML = `
                <div class="col-span-1 md:col-span-1 lg:col-span-3 theme-card p-6 flex flex-col relative overflow-hidden reveal-hidden">
                    <div class="flex items-center gap-3 mb-4 z-10">
                        <div class="w-8 h-8 rounded-lg bg-blue-50 text-blue-600 flex items-center justify-center"><i class="fa fa-pie-chart"></i></div>
                        <h3 class="font-bold text-main">${ui.section_titles.chart} (Radar)</h3>
                    </div>
                    <div class="flex-1 min-h-[300px] flex items-center justify-center min-w-0">
                        <div class="relative w-full h-full">
                            <canvas id="skillsChart"></canvas>
                        </div>
                    </div>
                </div>
                <div class="col-span-1 md:col-span-1 lg:col-span-3 theme-card p-6 reveal-hidden">
                    <div class="flex items-center gap-3 mb-6 pb-3 border-b border-gray-100/50">
                        <div class="w-8 h-8 rounded-lg bg-green-50 text-green-600 flex items-center justify-center"><i class="fa fa-sliders"></i></div>
                        <h3 class="font-bold text-main">${ui.section_titles.chart} (Levels)</h3>
                    </div>
                    <div class="space-y-6">
                        ${chartData.labels.map((l, i) => `
                            <div>
                                <div class="flex justify-between mb-1.5 text-sm font-semibold text-muted">
                                    <span>${l}</span>
                                    <span class="text-primary">${chartData.data[i]}%</span>
                                </div>
                                <div class="progress-bar" style="--progress:${chartData.data[i]}%"></div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            const iconVars = ['text-icon-1', 'text-icon-2', 'text-icon-3'];
            data.skills.card_groups.forEach((g, idx) => {
                bentoHTML += `
                <div class="col-span-1 md:col-span-1 lg:col-span-2 theme-card p-6 hover:-translate-y-1 transition-all duration-300 reveal-hidden" style="transition-delay: ${(idx+1)*100}ms">
                    <div class="flex items-center gap-3 mb-4 pb-3 border-b border-gray-100/50">
                        <i class="fa ${g.icon} ${iconVars[idx%3]} text-lg"></i>
                        <h3 class="font-bold text-main">${g.title}</h3>
                    </div>
                    <ul class="space-y-3">
                        ${g.items.slice(0, 5).map(item => `<li class="flex items-start gap-2 text-sm text-muted"><span class="w-1.5 h-1.5 rounded-full bg-gray-300 mt-1.5 shrink-0"></span><span class="leading-snug">${stripHtml(item)}</span></li>`).join('')}
                    </ul>
                </div>`;
            });
            bentoContainer.innerHTML = bentoHTML;

            if(myChart) myChart.destroy();
            myChart = new Chart(document.getElementById('skillsChart'), {
                type: 'radar',
                data: {
                    labels: chartData.labels,
                    datasets: [{ 
                        label: 'Level', 
                        data: chartData.data, 
                        backgroundColor: theme === 'geek' ? 'rgba(16, 185, 129, 0.2)' : 'rgba(0, 113, 227, 0.2)', 
                        borderColor: chartColor, 
                        pointBackgroundColor: theme === 'geek' ? '#0f172a' : '#fff', 
                        pointBorderColor: chartColor, 
                        borderWidth: 2 
                    }]
                },
                options: { 
                    responsive: true, maintainAspectRatio: false,
                    scales: { 
                        r: { 
                            min: 0, max: 100, 
                            ticks: { display: true, stepSize: 20, backdropColor: 'transparent', font: { size: 10 }, color: '#999' },
                            grid: { color: theme === 'geek' ? '#334155' : '#f0f0f0' },
                            pointLabels: { font: { size: 12, weight: '600', family: 'var(--font-main)' }, color: 'var(--color-text-muted)' }
                        } 
                    }, 
                    plugins: { legend: { display: false }, tooltip: { callbacks: { label: (context) => context.raw + '%' } } } 
                }
            });

            document.getElementById('t-exp').textContent = ui.section_titles.experience;
            document.getElementById('exp-list').innerHTML = data.experience.map(job => `
                <div class="relative pl-0 md:pl-0 reveal-hidden">
                    <div class="flex flex-col md:flex-row gap-8 md:gap-16">
                        <div class="md:w-1/3 text-left md:text-right relative">
                            <div class="sticky top-28 transition-all">
                                <h3 class="font-bold text-2xl text-main tracking-tight">${job.company}</h3>
                                <div class="text-primary font-semibold text-sm mt-1 mb-2 inline-block bg-date-bg px-3 py-1 rounded-full">${job.date}</div>
                                <p class="text-text-body font-medium mb-1">${job.role}</p>
                                <p class="text-gray-400 text-xs flex items-center md:justify-end gap-1"><i class="fa fa-map-marker"></i> ${job.location}</p>
                            </div>
                        </div>
                        <div class="md:w-2/3 border-l-2 pl-8 py-2 space-y-8" style="border-color: var(--color-border);">
                            ${job.projects.map(p => `
                                <div class="group">
                                    ${p.title ? `<h4 class="font-bold text-main mb-3 text-lg flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-primary"></span> ${p.title}</h4>` : ''}
                                    <ul class="space-y-4">
                                        ${p.details.map(d => `<li class="flex items-start gap-3 text-[15px] text-text-body leading-relaxed group-hover:text-main transition-colors"><i class="fa fa-check mt-1 shrink-0 text-xs" style="color: var(--check-color)"></i><span>${d}</span></li>`).join('')}
                                    </ul>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>`).join('');

            document.getElementById('t-edu').textContent = ui.section_titles.education;
            document.getElementById('edu-col-left').innerHTML = `
                <h3 class="font-bold text-xl mb-8 text-main flex items-center gap-3"><span class="bg-blue-100 text-blue-600 w-8 h-8 rounded-lg flex items-center justify-center text-sm"><i class="fa fa-graduation-cap"></i></span> ${ui.section_titles.academic}</h3>
                <div class="space-y-8">
                ${data.education.map(e => `
                    <div><h4 class="font-bold text-lg text-main">${e.school}</h4><p class="text-muted font-medium">${e.degree}</p><p class="text-gray-400 text-sm mt-1 flex items-center gap-2"><i class="fa fa-calendar-o"></i> ${e.date} &nbsp;‚Ä¢&nbsp; ${e.location}</p></div>`).join('')}
                </div>
                <div class="mt-12 pt-8 border-t border-gray-100/50">
                    <h3 class="font-bold text-lg mb-4 text-main flex items-center gap-2"><i class="fa fa-heart text-red-400"></i> ${ui.section_titles.hobbies}</h3>
                    <div class="flex flex-wrap gap-2 mb-4">${data.hobbies.items.map(h => `<span class="bg-gray-100/50 px-3 py-1 rounded-full text-xs font-medium text-muted border border-transparent hover:border-gray-200 transition">${h}</span>`).join('')}</div>
                    <p class="text-sm text-muted bg-gray-50/50 p-4 rounded-xl italic border border-gray-100/50">"${data.hobbies.desc}"</p>
                </div>`;
            
            document.getElementById('edu-col-right').innerHTML = data.tools.map(t => `
                <div class="mb-8 last:mb-0">
                    <h3 class="font-bold text-lg mb-5 text-main flex items-center gap-2"><i class="fa ${t.icon} text-gray-400"></i> ${t.group}</h3>
                    <div class="grid grid-cols-2 gap-3">
                        ${t.list.map(i => `<div class="bg-gray-50/50 px-4 py-3 rounded-xl text-sm font-medium text-muted border border-transparent hover:border-gray-200 hover:bg-white hover:shadow-sm transition-all cursor-default flex items-center gap-2"><i class="fa fa-check text-xs text-primary/50"></i> ${i}</div>`).join('')}
                    </div>
                </div>`).join('');

            const cf = ui.contact_form; const cl = ui.contact_labels;
            const formAction = cf.form_id ? `https://formspree.io/f/${cf.form_id}` : '';
            const onSubmitAttr = formAction ? '' : `onsubmit="event.preventDefault(); alert('Please config Form ID')"`;
            document.getElementById('contact-area').innerHTML = `
                <div class="text-center mb-10"><h2 class="text-3xl font-bold text-main mb-2">${ui.section_titles.contact}</h2></div>
                <div class="grid md:grid-cols-2 gap-12 items-stretch">
                    <div class="space-y-6 flex flex-col">
                         <div class="flex items-start gap-4 p-5 rounded-2xl bg-white border border-gray-100/50 shadow-sm hover:shadow-md transition">
                            <div class="w-10 h-10 rounded-full bg-purple-50 text-purple-500 flex items-center justify-center shrink-0"><i class="fa fa-briefcase"></i></div>
                            <div><div class="text-xs text-gray-400 uppercase font-bold tracking-wider mb-1">${basic.objective.label}</div>${basic.objective.items.map(o => `<div class="text-main font-medium mb-1">${o}</div>`).join('')}</div>
                         </div>
                         <div class="flex items-center gap-4 p-5 rounded-2xl bg-white border border-gray-100/50 shadow-sm hover:shadow-md transition">
                            <div class="w-10 h-10 rounded-full bg-blue-50 text-blue-500 flex items-center justify-center shrink-0"><i class="fa fa-envelope"></i></div>
                            <div><div class="text-xs text-gray-400 uppercase font-bold tracking-wider mb-1">${cl.email}</div><div class="text-main font-medium">${basic.email}</div></div>
                         </div>
                         <div class="flex items-center gap-4 p-5 rounded-2xl bg-white border border-gray-100/50 shadow-sm hover:shadow-md transition">
                            <div class="w-10 h-10 rounded-full bg-green-50 text-green-500 flex items-center justify-center shrink-0"><i class="fa fa-map-marker"></i></div>
                            <div><div class="text-xs text-gray-400 uppercase font-bold tracking-wider mb-1">${cl.location}</div><div class="text-main font-medium">${basic.location}</div></div>
                         </div>
                    </div>
                    <form class="h-full flex flex-col gap-4" action="${formAction}" method="POST" ${onSubmitAttr}>
                        <input type="text" name="name" placeholder="${cf.label_name}" class="w-full px-5 py-3 bg-white border border-gray-200/50 rounded-xl focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all text-main" required>
                        <input type="email" name="email" placeholder="${cf.label_email}" class="w-full px-5 py-3 bg-white border border-gray-200/50 rounded-xl focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all text-main" required>
                        <textarea name="message" class="w-full px-5 py-3 bg-white border border-gray-200/50 rounded-xl focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all flex-1 resize-none text-main" placeholder="${cf.label_msg}" required></textarea>
                        <button type="submit" class="w-full bg-btn-bg text-btn-text py-3 font-medium hover:bg-opacity-80 transition-all transform hover:scale-[1.02] shadow-lg theme-btn">${cf.btn_send}</button>
                    </form>
                </div>`;

            document.getElementById('f-name').textContent = basic.name;
            document.getElementById('f-desc').textContent = basic.footer_text;
            document.getElementById('social-icons').innerHTML = basic.social_links.map(s => {
                const btnClass = "w-10 h-10 rounded-full bg-gray-200/50 text-muted hover:bg-black hover:text-white flex items-center justify-center transition-all duration-300 transform hover:-translate-y-1";
                if(s.type === 'modal') return `<button onclick="showModal('${s.modal_img}', '${s.modal_text}')" class="${btnClass}"><i class="fa ${s.icon}"></i></button>`;
                return `<a href="${s.url}" target="_blank" class="${btnClass}"><i class="fa ${s.icon}"></i></a>`;
            }).join('');
        }
        
        window.showModal = (img, text) => {
            document.getElementById('modal-qr').src = img; document.getElementById('modal-text').textContent = text;
            const isZh = currentLang === 'zh'; document.getElementById('modal-title').textContent = isZh ? 'Êâ´Êèè‰∫åÁª¥Á†Å' : 'Scan QR Code';
            document.getElementById('wechatModal').classList.remove('hidden');
        }

        function renderPrintView(data, ui) {
            const basic = data.basic_info; const st = ui.section_titles;
            const separator = currentLang === 'zh' ? 'Ôºõ' : '; ';
            const matrixRows = (data.skills.card_groups || []).map(group => `<tr><td style="font-weight: bold;">${group.title}</td><td>${group.items.join(separator)}</td></tr>`).join('');
            const toolsHtml = data.tools.map(t => `<li><strong>${t.group}Ôºö</strong> ${t.list.join(', ')}</li>`).join('');

            let html = `
                <div class="print-h1">${basic.name}</div>
                <div class="print-meta"><ul class="print-list" style="margin:0; padding-left: 1.2rem;"><li><strong>${basic.objective.label}Ôºö</strong> ${basic.objective.items.join(' | ')}</li><li><strong>${data.ui.contact_labels.location}Ôºö</strong> ${basic.location.split('.')[0]} | <strong>${data.ui.contact_labels.email}Ôºö</strong> ${basic.email}</li></ul></div>
                <div class="print-section"><div class="print-h2">${st.profile}</div><div style="text-align: justify;">${data.profile.summary}</div></div>
                <div class="print-section"><div class="print-h2">${st.skills}</div><table class="print-table"><thead><tr><th width="18%">${currentLang === 'zh' ? 'ËÉΩÂäõÁ±ªÂà´' : 'Category'}</th><th>${currentLang === 'zh' ? 'Ê†∏ÂøÉÂÜÖÂÆπ' : 'Core Competencies'}</th></tr></thead><tbody>${matrixRows}</tbody></table></div>
                <div class="print-section"><div class="print-h2">${st.experience}</div>${data.experience.map(exp => `<div class="no-break"><div class="print-h3"><span>${exp.company}</span></div><div class="job-sub-row"><span>${exp.role}</span><span>${exp.location} | ${exp.date}</span></div>${exp.projects.map(p => `<div style="margin-top: 0.5rem;">${p.title ? `<div class="job-phase-title">${p.title}</div>` : ''}<ul class="print-list">${p.details.map(d => `<li>${d}</li>`).join('')}</ul></div>`).join('')}</div>`).join('')}</div>
                <div class="print-section no-break"><div class="print-h2">${st.education}</div>${data.education.map(edu => `<div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem; font-size: 9.5pt;"><div><strong>${edu.school}</strong> | ${edu.degree}</div><div>${edu.location} | ${edu.date}</div></div>`).join('')}</div>
                <div class="print-section no-break"><div class="print-h2">${currentLang === 'zh' ? 'ÊäÄËÉΩ‰∏éÂÖ¥Ë∂£' : 'Skills & Interests'}</div><ul class="print-list">${toolsHtml}<li><strong>${st.hobbies}Ôºö</strong> ${data.hobbies.items.join('„ÄÅ')}Ôºå${data.hobbies.desc}</li></ul></div>
            `;
            document.getElementById('print-view').innerHTML = html;
        }
    </script>
</body>
</html>
